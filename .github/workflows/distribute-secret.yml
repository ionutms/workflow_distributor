name: Distribute REPO_DISPATCH_TOKEN

on:
  workflow_dispatch:

jobs:
  distribute-secret:
    runs-on: ubuntu-latest
    steps:
      - name: Distribute secret to destination repo
        env:
          GH_TOKEN: ${{ secrets.WORKFLOW_DISTRIBUTION_TOKEN }}
          SECRET_VALUE: ${{ secrets.REPO_DISPATCH_TOKEN }}
        run: |
          gh secret set REPO_DISPATCH_TOKEN \
            --repo "ionutms/Minimal_AD74416H_Stack_Adapter" \
            --body "$SECRET_VALUE"
      
      - name: Verify distribution
        run: |
          echo "âœ… Successfully distributed REPO_DISPATCH_TOKEN to ionutms/Minimal_AD74416H_Stack_Adapter"